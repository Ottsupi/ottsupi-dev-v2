---
import NavBarFull from "./NavBarFull.astro";
import NavBarMobile from "./NavBarMobile.astro";
---

<nav
    class:list={[
        "fixed w-full z-10",
        "backdrop-blur-lg transition-all duration-150",
    ]}
    x-bind:class="[ isNavVisible ? 'top-0' : 'top-[-4rem]' ]"
    x-data="{
        lastScrollPosition: window.pageYOffset,
        isNavVisible: true,
        isMobileNavMenuOpen: false,
        scrollHandler() {
            const currentScrollPosition = window.pageYOffset;
            if (currentScrollPosition == 0) {
                this.isNavVisible = true;
            } else if (currentScrollPosition < this.lastScrollPosition) {
                this.isNavVisible = true;
            } else if (currentScrollPosition > this.lastScrollPosition) {
                this.isNavVisible = false;
            }
            // Close mobile nav menu on scroll
            this.isMobileNavMenuOpen = false;
            this.lastScrollPosition = currentScrollPosition;
        }
    }"
    x-on:scroll.window="scrollHandler()"
>
    <div
        class:list={[
            "block md:hidden mx-auto px-4 max-w-md",
            "bg-background-100 dark:bg-background-900",
            "transition-colors duration-300",
        ]}
    >
        <NavBarMobile />
    </div>
    <div
        class:list={[
            "hidden md:block mx-auto max-w-lg",
            "hover:bg-background-100/60 dark:hover:bg-background-900/60",
            "transition-colors duration-300",
        ]}
    >
        <NavBarFull />
    </div>
</nav>

<!-- Navbar margin -->
<div class="h-[54px]"></div>
